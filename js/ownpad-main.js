!function(e){var a=function(){this.initialize()};a.prototype={_etherpadEnabled:!1,_etherpadPublicEnabled:!1,_etherpadAPIEnabled:!1,_ethercalcEnabled:!1,initialize:function(){var e=this;null!==OC.getCurrentUser().uid&&$.ajax({url:OC.generateUrl("/apps/ownpad/ajax/v1.0/getconfig")}).done((function(a){e._etherpadEnabled="yes"===a.data.ownpad_etherpad_enable,e._etherpadPublicEnabled="yes"===a.data.ownpad_etherpad_public_enable,e._etherpadAPIEnabled="yes"===a.data.ownpad_etherpad_useapi,e._ethercalcEnabled="yes"===a.data.ownpad_ethercalc_enable,OC.Plugins.register("OCA.Files.NewFileMenu",e)}))},attach:function(e){var a=this;if(!0===a._etherpadEnabled&&(!0!==a._etherpadPublicEnabled&&!1!==a._etherpadAPIEnabled||e.addMenuEntry({id:"etherpad",displayName:t("ownpad","Pad"),templateName:t("ownpad","New pad.pad"),iconClass:"icon-filetype-etherpad",fileType:"etherpad",actionHandler:function(e){a._createPad("etherpad",e)}}),!0===a._etherpadAPIEnabled)){var d=!0===a._etherpadPublicEnabled?"Protected Pad":"Pad",n=!0===a._etherpadPublicEnabled?"New protected pad.pad":"New pad.pad";e.addMenuEntry({id:"etherpad-api",displayName:t("ownpad",d),templateName:t("ownpad",n),iconClass:"icon-filetype-etherpad",fileType:"etherpad",actionHandler:function(e){a._createPad("etherpad",e,!0)}})}!0===a._ethercalcEnabled&&e.addMenuEntry({id:"ethercalc",displayName:t("ownpad","Calc"),templateName:t("ownpad","New calc.calc"),iconClass:"icon-filetype-ethercalc",fileType:"ethercalc",actionHandler:function(e){a._createPad("ethercalc",e)}})},_createPad:function(a,d,n){n=void 0!==n&&n,e.Files.Files.isFileNameValid(d),d=FileList.getUniqueName(d),$.post(OC.generateUrl("/apps/ownpad/ajax/v1.0/newpad"),{dir:e.Files.App.currentFileList.getCurrentDirectory(),padname:d,type:a,protected:n},(function(e){"success"==e.status?FileList.add(e.data,{animate:!0,scrollTo:!0}):OC.dialogs.alert(e.data.message,t("core","Could not create file"))}))}},$(document).ready((function(){$("#filesApp").val()&&(e.FilesOwnpadMenu=new a)}))}(OCA);
//# sourceMappingURL=ownpad-main.js.map?v=0df9d1c84ebd7143a68a